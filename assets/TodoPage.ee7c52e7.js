import{c as z,h as A,q as se,e as ne,r as le,f as oe,Q as V,R as re}from"./QBtn.8b3a51d6.js";import{p as _,c,h as p,a as P,q as ue,E as ie,g as O,r as x,B as R,a9 as k,a0 as ce,aa as E,H as Q,I as b,J as I,d as i,K as f,F as de,R as fe,L as T,C as ve,S as H,ab as pe,Q as me,U as ge,O as _e,i as D,M as ke}from"./index.d3a5d516.js";import{c as be,a as he,z as xe,A as ye,B as C,C as Ce,D as Ve,E as Te,F as S,G as Ie,H as $e,I as qe,l as N,x as Se,w as B,Q as Be,y as Qe,m as we,n as Fe,o as L,p as Pe,q as Re,r as De,s as Le}from"./id-generator.1752f405.js";var ze=z({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:o}){const{proxy:{$q:e}}=O(),s=P(ue,_);if(s===_)return console.error("QPage needs to be a deep child of QLayout"),_;if(P(ie,_)===_)return console.error("QPage needs to be child of QPageContainer"),_;const r=c(()=>{const u=(s.header.space===!0?s.header.size:0)+(s.footer.space===!0?s.footer.size:0);if(typeof t.styleFn=="function"){const d=s.isContainer.value===!0?s.containerHeight.value:e.screen.height;return t.styleFn(u,d)}return{minHeight:s.isContainer.value===!0?s.containerHeight.value-u+"px":e.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":e.screen.height-u+"px"}}),a=c(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>p("main",{class:a.value,style:r.value},A(o.default))}});function Ae(t,o){const e=x(null),s=c(()=>t.disable===!0?null:p("span",{ref:e,class:"no-outline",tabindex:-1}));function l(r){const a=o.value;r!==void 0&&r.type.indexOf("key")===0?a!==null&&document.activeElement!==a&&a.contains(document.activeElement)===!0&&a.focus():e.value!==null&&(r===void 0||a!==null&&a.contains(r.target)===!0)&&e.value.focus()}return{refocusTargetEl:s,refocusTarget:l}}var Oe={xs:30,sm:35,md:40,lg:50,xl:60};const Ee={...he,...le,...xe,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},He=["update:modelValue"];function Ne(t,o){const{props:e,slots:s,emit:l,proxy:r}=O(),{$q:a}=r,u=be(e,a),d=x(null),{refocusTargetEl:v,refocusTarget:K}=Ae(e,d),M=se(e,Oe),h=c(()=>e.val!==void 0&&Array.isArray(e.modelValue)),$=c(()=>{const n=k(e.val);return h.value===!0?e.modelValue.findIndex(g=>k(g)===n):-1}),m=c(()=>h.value===!0?$.value>-1:k(e.modelValue)===k(e.trueValue)),y=c(()=>h.value===!0?$.value===-1:k(e.modelValue)===k(e.falseValue)),w=c(()=>m.value===!1&&y.value===!1),U=c(()=>e.disable===!0?-1:e.tabindex||0),G=c(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(u.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),J=c(()=>{const n=m.value===!0?"truthy":y.value===!0?"falsy":"indet",g=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?m.value===!0:y.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${n}${g}`}),W=c(()=>{const n={type:"checkbox"};return e.name!==void 0&&Object.assign(n,{".checked":m.value,"^checked":m.value===!0?"checked":void 0,name:e.name,value:h.value===!0?e.val:e.trueValue}),n}),X=ye(W),Y=c(()=>{const n={tabindex:U.value,role:t==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":w.value===!0?"mixed":m.value===!0?"true":"false"};return e.disable===!0&&(n["aria-disabled"]="true"),n});function q(n){n!==void 0&&(R(n),K(n)),e.disable!==!0&&l("update:modelValue",Z(),n)}function Z(){if(h.value===!0){if(m.value===!0){const n=e.modelValue.slice();return n.splice($.value,1),n}return e.modelValue.concat([e.val])}if(m.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(y.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function ee(n){(n.keyCode===13||n.keyCode===32)&&R(n)}function te(n){(n.keyCode===13||n.keyCode===32)&&q(n)}const ae=o(m,w);return Object.assign(r,{toggle:q}),()=>{const n=ae();e.disable!==!0&&X(n,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const g=[p("div",{class:J.value,style:M.value,"aria-hidden":"true"},n)];v.value!==null&&g.push(v.value);const F=e.label!==void 0?ne(s.default,[e.label]):A(s.default);return F!==void 0&&g.push(p("div",{class:`q-${t}__label q-anchor--skip`},F)),p("div",{ref:d,class:G.value,...Y.value,onClick:q,onKeydown:ee,onKeyup:te},g)}}const je=p("div",{key:"svg",class:"q-checkbox__bg absolute"},[p("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[p("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),p("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var Ke=z({name:"QCheckbox",props:Ee,emits:He,setup(t){function o(e,s){const l=c(()=>(e.value===!0?t.checkedIcon:s.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>l.value!==null?[p("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[p(oe,{class:"q-checkbox__icon",name:l.value})])]:[je]}return Ne("checkbox",o)}});const Me=()=>{async function t(){const l=C(Ce()),r=await Ve(Te(l,"tasks"));return Object.values(r.val()).map(a=>a)}function o(l){const r=C(S,`tasks/${l.id}`);Ie(r,l)}function e(l){const r=C(S,`tasks/${l}`);$e(r)}function s(l){const r={};r[`tasks/${l.id}`]=l,qe(C(S),r)}return{readTasks:t,writeTask:o,removeTask:e,updateTask:s}},j=ce("task",()=>{const t=Me(),o=x([]);e();async function e(){o.value=await t.readTasks()}function s(a){o.value.push(a),t.writeTask(a)}function l(a){o.value.splice(o.value.findIndex(u=>u.id===a),1),t.removeTask(a)}function r(a){const u=o.value.filter(d=>d.id===a)[0];u.done=!u.done,t.updateTask(u)}return{tasks:o,addTask:s,deleteTask:l,toggleTask:r}});const Ue=Q({__name:"TaskList",setup(t){const o=j(),e=N(),s=c(()=>o.tasks.filter(l=>l.folderId==e.currentFolderId));return(l,r)=>(b(),I("div",null,[i(Qe,{class:"bg-white",separator:"",border:""},{default:f(()=>[(b(!0),I(de,null,fe(T(s),a=>ve((b(),H(Se,{key:a.id,class:pe({"done bg-blue-1":a.done}),onClick:u=>T(o).toggleTask(a.id),clickable:""},{default:f(()=>[i(B,{avatar:""},{default:f(()=>[i(Ke,{modelValue:a.done,"onUpdate:modelValue":u=>a.done=u,class:"no-pointer-events",color:"primary"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i(B,null,{default:f(()=>[i(Be,null,{default:f(()=>[me(ge(a.title),1)]),_:2},1024)]),_:2},1024),i(B,{side:""},{default:f(()=>[i(V,{onClick:_e(u=>T(o).deleteTask(a.id),["stop"]),flat:"",round:"",dense:"",color:"primary",icon:"delete"},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class","onClick"])),[[re]])),128))]),_:1})]))}});var Ge=E(Ue,[["__scopeId","data-v-bea459f8"]]);const Je={class:"addBtn"},We=ke("div",{class:"text-h6"},"New task",-1),Xe=Q({__name:"TaskAddButton",setup(t){const o=j(),e=N();let s=x(!1);const l=x("");function r(){const u={id:Le(),title:l.value,folderId:e.currentFolderId,done:!1};o.addTask(u),a()}function a(){l.value="",s.value=!1}return(u,d)=>(b(),I("div",Je,[i(V,{onClick:d[0]||(d[0]=v=>D(s)?s.value=!0:s=!0),color:"primary",icon:"add",round:""}),i(De,{modelValue:T(s),"onUpdate:modelValue":d[2]||(d[2]=v=>D(s)?s.value=v:s=v),onHide:a},{default:f(()=>[i(we,{class:"full-width"},{default:f(()=>[i(Fe,{onSubmit:r},{default:f(()=>[i(L,null,{default:f(()=>[We]),_:1}),i(L,{class:"q-pt-none"},{default:f(()=>[i(Pe,{filled:"",autofocus:"",modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=v=>l.value=v),label:"What's your new task?","lazy-rules":"",rules:[v=>v&&v.length>0||"Please type something"]},null,8,["modelValue","rules"])]),_:1}),i(Re,{align:"right",class:"text-primary"},{default:f(()=>[i(V,{flat:"",label:"Cancel",onClick:a}),i(V,{flat:"",label:"Add task",type:"submit",color:"primary"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const Ye={class:"row q-pa-sm bg-white"},Ze={__name:"TaskButtonBar",setup(t){return(o,e)=>(b(),I("div",Ye,[i(Xe)]))}};var et=E(Ze,[["__scopeId","data-v-3a378f86"]]);const nt=Q({__name:"TodoPage",setup(t){return(o,e)=>(b(),H(ze,{class:"bg-grey-3 column"},{default:f(()=>[i(et),i(Ge)]),_:1}))}});export{nt as default};
